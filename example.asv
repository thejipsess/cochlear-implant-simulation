clear; close all; clc; 

% Set settings
FS = 16e3;
filetype = '.mp3';
filename = 'Together They Found the Courage 2';

% Load  the audio file
[x,fs] = audioread(['Audio/in/',filename, filetype]);


% Resample the audio
x = resample(x, FS, fs);

% Convert audio to the cochlear implant signal
y = vocoder(x, FS, 8, 160, 'NOISE', 1);

figure;
plot((1:length(y))/FS, y);
xlabel('Time (second)')
title('Vocoded signal')



audiowrite(['Audio/out/',filename,'.flac'], y, FS);